(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3109],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return c},kt:function(){return d}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),m=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=m(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=m(t),d=i,h=u["".concat(s,".").concat(d)]||u[d]||p[d]||o;return t?a.createElement(h,r(r({ref:n},c),{},{components:t})):a.createElement(h,r({ref:n},c))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var m=2;m<o;m++)r[m]=t[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},270:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return m},toc:function(){return c},default:function(){return u}});var a=t(2122),i=t(9756),o=(t(7294),t(3905)),r=["components"],l={title:"Slot Machine"},s=void 0,m={unversionedId:"fun/slot-machine",id:"fun/slot-machine",isDocsHomePage:!1,title:"Slot Machine",description:"This command runs the slot machine game.",source:"@site/docs/fun/slot-machine.md",sourceDirName:"fun",slug:"/fun/slot-machine",permalink:"/fun/slot-machine",editUrl:"https://github.com/yagpdb-cc/yagpdb-cc/edit/master/website/docs/fun/slot-machine.md",version:"current",frontMatter:{title:"Slot Machine"},sidebar:"sidebar",previous:{title:"Repeat Phrase",permalink:"/fun/repeat"},next:{title:"Starboard V1",permalink:"/fun/starboardv1"}},c=[{value:"Trigger",id:"trigger",children:[]},{value:"Usage",id:"usage",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"Code",id:"code",children:[]},{value:"Author",id:"author",children:[]}],p={toc:c};function u(e){var n=e.components,t=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This command runs the slot machine game."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This command assumes that you have an existing currency system set up to provide credits to users."))),(0,o.kt)("h2",{id:"trigger"},"Trigger"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type:")," ",(0,o.kt)("inlineCode",{parentName:"p"},"Command"),(0,o.kt)("br",null),"\n",(0,o.kt)("strong",{parentName:"p"},"Trigger:")," ",(0,o.kt)("inlineCode",{parentName:"p"},"slotmachine")),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"slotmachine <amount>")," - Runs the slot machine, betting ",(0,o.kt)("inlineCode",{parentName:"li"},"amount")," credits.")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\ud83d\udccc ",(0,o.kt)("inlineCode",{parentName:"p"},"$dbName"),(0,o.kt)("br",null),"\nDatabase entry name that stores the user's credits.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$gameName"),(0,o.kt)("br",null),"\nWhat the game should be called.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$user"),(0,o.kt)("br",null),"\nWhat the player should be called.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$spinName"),(0,o.kt)("br",null),"\nWhat to show to users when the slot machine is currently spinning.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$lose"),(0,o.kt)("br",null),"\nText to show users when they lose.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$win"),(0,o.kt)("br",null),"\nText to show users when they win.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$profit"),(0,o.kt)("br",null),"\nWhat 'profit' should be called.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$currency"),(0,o.kt)("br",null),"\nName of the currency.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$payOut"),(0,o.kt)("br",null),"\nWhat 'pay out' should be called.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$youHave"),(0,o.kt)("br",null),"\nWhat 'you have' should be called.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$helper"),(0,o.kt)("br",null),"\nHelper text title.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$helpText"),(0,o.kt)("br",null),"\nHelp text for the command.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$notEnough"),(0,o.kt)("br",null),"\nMessage to show to users when they do not have sufficient credits.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$betBelow1"),(0,o.kt)("br",null),"\nMessage to show to users when they bet less than one credit.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\ud83d\udccc ",(0,o.kt)("inlineCode",{parentName:"p"},"$bettingChannel"),(0,o.kt)("br",null),"\nChannel ID where users can play the game.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$minMax"),(0,o.kt)("br",null),"\nWhether there should be a minimum/maximum amount users can bet (see the options below).")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$minBet"),(0,o.kt)("br",null),"\nMinimum amount people can bet.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$maxBet"),(0,o.kt)("br",null),"\nMaximum amount people can bet.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"$outOfRange"),(0,o.kt)("br",null),"\nMessage to show to users when they bet an amount that is less than the minimum / greater than the maximum.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\ud83d\udccc ",(0,o.kt)("inlineCode",{parentName:"p"},"$channels"),(0,o.kt)("br",null),"\nA list of arbitrary channel IDs in your server to prevent the game from lagging."))),(0,o.kt)("h2",{id:"code"},"Code"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-gotmpl",metastring:"file=../../../src/fun/slot_machine.go.tmpl",file:"../../../src/fun/slot_machine.go.tmpl"},'{{/*\n    Slot machine game that integrates with an existing currency system.\n    See <https://yagpdb-cc.github.io/fun/slot-machine> for more information.\n\n    Author: jo3-l <https://github.com/jo3-l>\n*/}}\n\n{{/* Configurable values */}}\n{{ $dbName := "CREDITS" }}\n{{ $gameName := "Slot Machine" }}\n{{ $user := "User" }}\n{{ $spinName := "SPINNING" }}\n{{ $lose := "You lost :(" }}\n{{ $win := "YOU WON!" }}\n{{ $profit := "Profit" }}\n{{ $currency := "Credits" }}\n{{ $payOut := "Pay Out" }}\n{{ $youHave := "you have " }}\n{{ $helper := "Usage" }}\n{{ $helpText := "-bet <amount>\\nFor example: **-bet 10**\\nThis way you would be betting 10 credits." }}\n{{ $notEnough := "Insuficient credits" }}\n{{ $betBelow1 := "You have to bet 1 credit at least" }}\n{{ $bettingChannel := 640790412986023949 }}\n{{ $minMax := true }}\n{{ $minBet := 100 }}\n{{ $maxBet := 200 }}\n{{ $outOfRange := "You have to bet between 100 and 200!" }}\n{{ $channels := cslice\n    650881854722932746\n    663411278139883520\n    641092472423972864\n    642429118633213953\n    678827664135553044\n}}\n{{/* End of configurable values */}}\n\n{{ $template := "**-------------------\\n %s | %s | %s |\\n-------------------\\n- %s -**" }}\n{{ $header := printf "%s | %s: %s" $gameName $user .User.Username }}\n{{ $slotEmoji := "<a:slotmoney:686445052284895237>" }}\n{{ $g := 65280 }}{{ $y := 16776960 }}{{ $r := 16711680 }}{{ $b := 65534 }}\n{{ $emojis := cslice "\ud83e\udd47" "\ud83e\udd47" "\ud83e\udd47" "\ud83e\udd47" "\ud83e\udd47" "\ud83e\udd47" "\ud83e\udd47"\n    "\ud83d\udc8e" "\ud83d\udc8e" "\ud83d\udc8e" "\ud83d\udc8e" "\ud83d\udc8e" "\ud83d\udc8e"\n    "\ud83d\udcaf" "\ud83d\udcaf" "\ud83d\udcaf" "\ud83d\udcaf"\n    "\ud83d\udcb5" "\ud83d\udcb5" "\ud83d\udcb5"\n    "\ud83d\udcb0" "\ud83d\udcb0" }}\n{{ $choosen := index (shuffle $emojis) 0 }}\n{{ $choosen2 := index (shuffle $emojis) 0 }}\n{{ $choosen3 := index (shuffle $emojis) 0 }}\n{{ $bal := toInt (dbGet .User.ID $dbName).Value }}\n{{ $embed := sdict\n    "color" $g\n    "fields" (cslice (sdict\n        "name" $header\n        "value" (printf $template $slotEmoji $slotEmoji $slotEmoji $spinName)\n        "inline" false\n    )) }}\n{{ if and (not .ExecData) (eq .Channel.ID $bettingChannel) (not (dbGet .User.ID "block_slot_123456")) }}\n    {{ if .CmdArgs }}\n        {{ $bet := toInt (index .CmdArgs 0) }}\n        {{ $ok := true }}\n        {{ if $minMax }}\n            {{ if or (lt $bet $minBet) (gt $bet $maxBet) }}\n                {{ $ok = false }}\n                {{ $outOfRange }}\n            {{ end }}\n        {{ end }}\n        {{ if $ok }}\n            {{ if ge $bet 1 }}\n                {{ if ge $bal $bet }}\n                    {{ dbSet .User.ID "block_slot_123456" true }}\n                    {{ $silent := dbIncr .User.ID $dbName (mult -1 $bet) }}\n                    {{ $id := sendMessageRetID nil (cembed $embed) }}\n                    {{ execCC .CCID (index (shuffle $channels) 0) 2 (sdict\n                        "depth" 1\n                        "id" $id\n                        "bet" $bet\n                    ) }}\n                {{ else }} {{ $notEnough }}, {{ .User.Mention }}! {{ end }}\n            {{ else }} {{ $betBelow1 }}, {{ .User.Mention }}! {{ end }}\n        {{ end }}\n    {{ else }}\n        {{ $embedHelp := cembed\n            "title" $gameName\n            "fields" (cslice\n                (sdict \n                    "name" $payOut \n                    "value" "**\ud83e\udd47\ud83e\udd47\u2753 - 1x\\n\ud83d\udc8e\ud83d\udc8e\u2753 - 2x\\n\ud83d\udcaf\ud83d\udcaf\u2753 - 3x\\n\ud83e\udd47\ud83e\udd47\ud83e\udd47 - 3x\\n\ud83d\udc8e\ud83d\udc8e\ud83d\udc8e - 4x\\n\ud83d\udcb5\ud83d\udcb5\u2753 - 4x\\n\ud83d\udcaf\ud83d\udcaf\ud83d\udcaf - 5x\\n\ud83d\udcb0\ud83d\udcb0\u2753 - 5x\\n\ud83d\udcb5\ud83d\udcb5\ud83d\udcb5 - 10x\\n\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0 - 15x**"\n                    "inline" false\n                )\n                (sdict "name" $helper "value" $helpText "inline" false)\n            )\n            "color" $y\n        }}\n        {{ sendMessage nil $embedHelp }}\n    {{ end }}\n{{ end }}\n\n{{ with .ExecData }}\n    {{ if eq .depth 1 }}\n        {{ $embed.Set "fields" (cslice (sdict\n            "name" $header\n            "value" (printf $template $choosen $slotEmoji $slotEmoji $spinName)\n            "inline" false\n        )) }}\n        {{ editMessage $bettingChannel .id (cembed $embed) }}\n        {{ execCC $.CCID (index (shuffle $channels) 0) 1 (sdict\n            "depth" 2\n            "id" .id\n            "choosen" $choosen\n            "bet" .bet\n        ) }}\n    {{ else if eq .depth 2 }}\n        {{ $embed.Set "fields" (cslice\n            (sdict\n                "name" $header\n                "value" (printf $template .choosen $choosen2 $slotEmoji $spinName)\n                "inline" false\n            )\n        ) }}\n        {{ editMessage $bettingChannel .id (cembed $embed) }}\n        {{ execCC $.CCID (index (shuffle $channels) 0) 1 (sdict\n            "depth" 3\n            "id" .id\n            "choosen" .choosen\n            "choosen2" $choosen2\n            "bet" .bet\n        ) }}\n    {{ else if eq .depth 3 }}\n        {{ $announce := $lose }}\n        {{ $multiplier := 1 }}\n        {{ if (and (eq .choosen "\ud83d\udc8e") (eq .choosen2 "\ud83d\udc8e") (ne $choosen3 "\ud83d\udc8e")) }}\n            {{ $multiplier = 2 }}\n        {{ else if or (and (eq .choosen "\ud83e\udd47") (eq .choosen2 "\ud83e\udd47") (eq $choosen3 "\ud83e\udd47")) (and (eq .choosen "\ud83d\udcaf") (eq .choosen2 "\ud83d\udcaf") (ne $choosen3 "\ud83d\udcaf")) }}\n            {{ $multiplier = 3 }}\n        {{ else if or (and (eq .choosen "\ud83d\udc8e") (eq .choosen2 "\ud83d\udc8e") (eq $choosen3 "\ud83d\udc8e")) (and (eq .choosen "\ud83d\udcb5") (eq .choosen2 "\ud83d\udcb5") (ne $choosen3 "\ud83d\udcb5")) }}\n            {{ $multiplier = 4 }}\n        {{ else if or (and (eq .choosen "\ud83d\udcaf") (eq .choosen2 "\ud83d\udcaf") (eq $choosen3 "\ud83d\udcaf")) (and (eq .choosen "\ud83d\udcb0") (eq .choosen2 "\ud83d\udcb0") (ne $choosen3 "\ud83d\udcb0")) }}\n            {{ $multiplier = 5 }}\n        {{ else if and (eq .choosen "\ud83d\udcb5") (eq .choosen2 "\ud83d\udcb5") (eq $choosen3 "\ud83d\udcb5") }}\n            {{ $multiplier = 10 }}\n        {{ else if and (eq .choosen "\ud83d\udcb0") (eq .choosen2 "\ud83d\udcb0") (eq $choosen3 "\ud83d\udcb0") }}\n            {{ $multiplier = 15 }}\n        {{ end }}\n        {{ $pag1 := sdict "name" $profit "value" (joinStr "" "**-" .bet " " (lower $currency) "**") "inline" true }}\n        {{ $c := $r }}\n        {{ if eq .choosen .choosen2 }}\n            {{ $c = $b }}\n            {{ $announce = $win }}\n            {{ $pag1 = (sdict "name" $profit "value" (joinStr "" "**" (mult .bet $multiplier) " " (lower $currency) "**") "inline" true) }}\n            {{ $silent2 := dbIncr $.User.ID $dbName (mult .bet $multiplier) }}\n        {{ end }}\n        {{ $embed.Set "fields" (cslice\n            (sdict\n                "name" $header\n                "value" (printf $template .choosen .choosen2 $choosen3 $announce)\n                "inline" false\n            )\n        ) }}\n        {{ $embed.Set "color" $c }}\n        {{ $embed.Set "fields" ($embed.fields.Append $pag1) }}\n        {{ $saldo := toInt (dbGet $.User.ID $dbName).Value }}\n        {{ $pag2 := sdict\n            "name" $currency\n            "value" (joinStr "" $youHave " **" $saldo " " (lower $currency) "**")\n            "inline" true\n         }}\n        {{ $embed.Set "fields" ($embed.fields.Append $pag2) }}\n        {{ editMessage $bettingChannel .id (cembed $embed) }}\n        {{ dbDel $.User.ID "block_slot_123456" }}\n    {{ end }}\n{{ end }}\n')),(0,o.kt)("h2",{id:"author"},"Author"),(0,o.kt)("p",null,"This custom command was written by ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Pedro-Pessoa"},"@Pedro-Pessoa"),"."))}u.isMDXComponent=!0}}]);