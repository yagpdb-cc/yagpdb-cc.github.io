<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="YAGPDB Custom Commands" href="/opensearch.xml"><title data-react-helmet="true">Emote Filter | YAGPDB Custom Commands</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yagpdb-cc.github.io/moderation/emote-filter"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Emote Filter | YAGPDB Custom Commands"><meta data-react-helmet="true" name="description" content="Triggers on emoji-only message chains and punishes the user."><meta data-react-helmet="true" property="og:description" content="Triggers on emoji-only message chains and punishes the user."><link data-react-helmet="true" rel="shortcut icon" href="/img/yag.ico"><link data-react-helmet="true" rel="canonical" href="https://yagpdb-cc.github.io/moderation/emote-filter"><link data-react-helmet="true" rel="alternate" href="https://yagpdb-cc.github.io/moderation/emote-filter" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yagpdb-cc.github.io/moderation/emote-filter" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://8CQ0QFY0BD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.66efb1a4.css">
<link rel="preload" href="/assets/js/runtime~main.f3416751.js" as="script">
<link rel="preload" href="/assets/js/main.92c5988f.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/yag.ico" alt="YAGPDB logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/yag.ico" alt="YAGPDB logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">YAGPDB Custom Commands</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/adding-ccs">Adding custom commands</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yagpdb-cc/yagpdb-cc/tree/master" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåô</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">‚òÄÔ∏è</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/adding-ccs">Adding Custom Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AFK System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Birthday System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Code Snippets</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Fun Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Giveaway System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Informational Commands</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Leveling System</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Moderation Commands</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Raid Guard</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Custom Report System</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/moderation/emote-filter">Emote Filter</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/lockdown">Lockdown</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/nickname-moderation">Nickname Moderation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/notes">Notes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/slowmode">Slowmode</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/moderation/staff-on-duty">Staff On Duty</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Suggestion System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tag System</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Utility Commands</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Emote Filter</h1></header><p>Triggers on emoji-only message chains and punishes the user.</p><p>More specifically, this command will allow a set number of emote-only messages to go through before deleting subsequent messages and tracking them in a log channel.
It uses a rolling time frame: every time the filter catches an emote-only message, the automod length is refreshed.
The regex trigger will capture any number of emotes in a row and with up to 2 characters on each side to prevent bypassing automod (such as an emote followed by a single period) but has enough wiggle room to allow a message such as &quot;LOL :kek:&quot;.</p><p>You have the option to enable an automatic emote ban function based on assigning a role to the user, which will delete all emote-only messages for the duration of their ban rather than counting towards the filter.
We recommend disabling the <code>Use External Emoji</code> permission as an added incentive for nitro users to not get themselves emote banned.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>YAGPDB cannot detect message edits; thus, users are able to send messages and then edit them to single emotes bypassing the filter.
There is nothing that can be done about this so it&#x27;s not an issue of this command.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trigger"></a>Trigger<a class="hash-link" href="#trigger" title="Direct link to heading">#</a></h2><p><strong>Type:</strong> <code>Regex</code><br>
<strong>Trigger:</strong> <code>^.{0,2}(((&lt;a?:[\w~]{2,32}:\d{17,19}&gt;)|[\x{1f1e6}-\x{1f1ff}]{2}|\p{So}\x{fe0f}?[\x{1f3fb}-\x{1f3ff}]?(\x{200D}\p{So}\x{fe0f}?[\x{1f3fb}-\x{1f3ff}]?)*|[#\d*]\x{FE0F}?\x{20E3}).{0,2}|\s+)+$</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><ul><li><p><code>$length</code><br>
Duration of auto delete, in seconds.</p></li><li><p><code>$emoteDelete</code><br>
Number of emotes allowed before deletion.</p></li><li><p><code>$logEnable</code><br>
Whether or not logging is enabled.</p></li><li><p>üìå <code>$logChannel</code><br>
Channel to send logs. Only applies if <code>$logEnable</code> is <code>true</code>.</p></li><li><p><code>$banEnable</code><br>
Whether or not emote bans are enabled.</p></li><li><p>üìå <code>$banRole</code><br>
Role ID of the emote ban role.</p></li><li><p><code>$banTime</code><br>
Emote ban duration in seconds.</p></li><li><p><code>$banNum</code><br>
Number of emotes from a single user permitted before an emote ban.</p></li><li><p><code>$banWarn</code><br>
Number of emotes from a single user before sending a warning in DM. Use <code>0</code> to disable.</p></li><li><p><code>$banMsg</code><br>
Whether or not you have <code>Use External Emoji</code> permissions disabled in channels.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="code"></a>Code<a class="hash-link" href="#code" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W gotmpl"><pre tabindex="0" class="prism-code language-gotmpl codeBlock_6upA thin-scrollbar" style="color:#b3b1ad;background-color:#191F26"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{/*</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	Triggers on emoji-only message chains and punishes the user.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	See &lt;https://yagpdb-cc.github.io/moderation/emote-filter&gt; for more information.</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	Author: DV0RAK &lt;https://github.com/dvoraknt/&gt;</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">*/}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{/* Configurable values */}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$length := 120}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$emoteDelete := 3}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$logEnable := true}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$logChannel := 503913846684123166}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banEnable := true}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banRole := 539502463649185794}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banTime := 3600}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banNum := 5}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banWarn := 3}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$banMsg := true}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{/* End of configurable values */}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{/* ===============================DO NOT TOUCH=============================== */}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$x := &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$spammers := &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$spammerList := &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$spammersdict := &quot;&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if hasRoleID $banRole}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{deleteTrigger 0}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{if and (dbGet .Channel.ID &quot;cooldown&quot;) (not (hasRoleID $banRole))}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{if eq (dbIncr .Channel.ID &quot;emoteCount&quot; 1|toInt) $emoteDelete}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{dbSetExpire .Channel.ID &quot;cooldown&quot; &quot;cooldown&quot; $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{if $logEnable}}{{$x = sendMessageRetID $logChannel (print &quot;Emote filter triggered in &lt;#&quot; .Channel.ID &quot;&gt;&quot;)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{dbSetExpire .Channel.ID &quot;messageID&quot; ($x|toString) $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{$spammersdict := sdict (dbGet .Channel.ID &quot;spammers&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{if $count := $spammersdict.Get (str .User.ID)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{$count = add $count 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{$spammersdict.Set (str .User.ID) $count}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{if and $banEnable (eq $count $banWarn)}}{{sendDM &quot;You have sent (&quot; $banWarn &quot;) emote only messages in a short time period, if you continue sending these messages you will have your permissions revoked. To keep channels conversation focused please limit single emote uses to reactions or incorporated into other messages.&quot;}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{$spammersdict.Set (str .User.ID) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{range $k, $v := $spammersdict}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{- $spammerList = joinStr &quot;\n&quot; $spammerList (printf &quot;&lt;@%s&gt; - %s&quot; $k (str $v)) -}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{if $logEnable}}{{editMessage $logChannel $x (cembed &quot;title&quot; &quot;Emotes Filtered&quot; &quot;description&quot; $spammerList)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{dbSetExpire .Channel.ID &quot;messageID&quot; ($x|toString) $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{else if lt (dbIncr .Channel.ID &quot;emoteCount&quot; 1|toInt) $emoteDelete}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{dbSetExpire .Channel.ID &quot;cooldown&quot; &quot;cooldown&quot; $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{$spammersdict := sdict (dbGet .Channel.ID &quot;spammers&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{if $count := $spammersdict.Get (str .User.ID)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{$count = add $count 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{$spammersdict.Set (str .User.ID) $count}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{if and $banEnable (eq $count $banWarn)}}{{sendDM &quot;You have sent (&quot; $banWarn &quot;) emote only messages in a short time period, if you continue sending these messages you will have your permissions revoked. To keep channels conversation focused please limit single emote uses to reactions or incorporated into other messages.&quot;}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{$spammersdict.Set (str .User.ID) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{else if gt (dbIncr .Channel.ID &quot;emoteCount&quot; 1|toInt) $emoteDelete}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{deleteTrigger 0}}{{dbSetExpire .Channel.ID &quot;cooldown&quot; &quot;cooldown&quot; $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{$x = (dbGet .Channel.ID &quot;messageID&quot;).Value|toString}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{$spammersdict := sdict (dbGet .Channel.ID &quot;spammers&quot;).Value}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{if $count := $spammersdict.Get (str .User.ID)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{$count = add $count 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{$spammersdict.Set (str .User.ID) $count}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{if and $banEnable (eq $count $banWarn)}}{{sendDM &quot;You have sent (&quot; $banWarn &quot;) emote only messages in a short time period, if you continue sending these messages you will have your permissions revoked. To keep channels conversation focused please limit single emote uses to reactions or incorporated into other messages.&quot;}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{if and (ge $count $banNum) ($banEnable)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{addRoleID $banRole}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{removeRoleID $banRole $banTime}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{$spammersdict.Set (str .User.ID) (print $banNum &quot; - User has been emote banned.&quot;)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{$banMin := div $banTime 60}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{if $banMsg}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">					{{sendDM &quot;You have been emote banned for &quot; $banMin &quot; minutes. You will not be able to use external emotes (if you are a nitro user) and will not be able to send emote-only messages during this time.&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">					{{sendDM &quot;You have been emote banned for &quot; $banMin &quot; minutes. You will not be able to send emote-only messages during this time.&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">				{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">			{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{else}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{$spammersdict.Set (str .User.ID) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{range $k, $v := $spammersdict}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">		{{- $spammerList = joinStr &quot;\n&quot; $spammerList (printf &quot;&lt;@%s&gt; - %s&quot; $k (str $v)) -}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{if $logEnable}}{{editMessage $logChannel $x (cembed &quot;title&quot; &quot;Emotes Filtered&quot; &quot;description&quot; $spammerList)}}{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{dbSetExpire .Channel.ID &quot;messageID&quot; ($x|toString) $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">	{{end}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{else if not (hasRoleID $banRole)}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{dbSetExpire .Channel.ID &quot;cooldown&quot; &quot;cooldown&quot; $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{dbDel .Channel.ID &quot;emoteCount&quot;}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{$spammersdict = sdict (str .User.ID) 1}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{dbSetExpire .Channel.ID &quot;spammers&quot; $spammersdict $length}}</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#b3b1ad"><span class="token plain">{{end}}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="author"></a>Author<a class="hash-link" href="#author" title="Direct link to heading">#</a></h2><p>This custom command was written by <a href="https://github.com/dvoraknt" target="_blank" rel="noopener noreferrer">@dvoraknt</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yagpdb-cc/yagpdb-cc/edit/master/website/docs/moderation/emote-filter.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/moderation/report-system/reaction-handler"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Reaction Handler</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/moderation/lockdown"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lockdown ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trigger" class="table-of-contents__link">Trigger</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li><li><a href="#code" class="table-of-contents__link">Code</a></li><li><a href="#author" class="table-of-contents__link">Author</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">YAGPDB CCs</a></li><li class="footer__item"><a href="https://docs.yagpdb.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://learn.yagpdb.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Learning Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/botlabs-gg/yagpdb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.com/invite/4udtcA5" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Community Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/yagpdb-cc/yagpdb-cc" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB CC GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://reddit.com/r/YAGPDB" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YAGPDB Subreddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 YAGPDB-CC contributors under the MIT license.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f3416751.js"></script>
<script src="/assets/js/main.92c5988f.js"></script>
</body>
</html>